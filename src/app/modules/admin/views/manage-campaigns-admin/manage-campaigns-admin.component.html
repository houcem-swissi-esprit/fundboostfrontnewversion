<div class="container">
  <h2>Manage Campaigns</h2>
  <button class="btn btn-secondary" (click)="resetSort()">Reset Sort</button>

  <div class="search-form">
    <h3>Search Campaigns</h3>
    <form (ngSubmit)="filterCampaigns()">
      <div class="form-group">
        <label for="creatorUsername">Creator Username</label>
        <input type="text" id="creatorUsername" class="form-control" [(ngModel)]="searchCriteria.creatorUsername" name="creatorUsername">
      </div>
      <div class="form-group">
        <label for="title">Title</label>
        <input type="text" id="title" class="form-control" [(ngModel)]="searchCriteria.title" name="title">
      </div>
      <div class="form-group">
        <label for="status">Status</label>
        <select id="status" class="form-control" [(ngModel)]="searchCriteria.status" name="status">
          <option value="">All</option>
          <option value="PENDING">Pending</option>
          <option value="APPROVED">Approved</option>
          <option value="REJECTED">Rejected</option>
          <option value="ACTIVE">Active</option>
          <option value="CLOSED">Closed</option>
        </select>
      </div>
      <div class="form-group">
        <label for="fundingType">Funding Type</label>
        <select id="fundingType" class="form-control" [(ngModel)]="searchCriteria.fundingType" name="fundingType">
          <option value="">All</option>
          <option value="DONATIONBASED">Donation Based</option>
          <option value="EQUITYBASED">Equity Based</option>
        </select>
      </div>
      <div class="form-group">
        <label for="targetAmount">Target Amount</label>
        <input type="number" id="targetAmount" class="form-control" [(ngModel)]="searchCriteria.targetAmount" name="targetAmount">
      </div>
      <div class="form-group">
        <label for="currentAmount">Current Amount</label>
        <input type="number" id="currentAmount" class="form-control" [(ngModel)]="searchCriteria.currentAmount" name="currentAmount">
      </div>
      <div class="form-group">
        <label for="startDate">Start Date</label>
        <input type="date" id="startDate" class="form-control" [(ngModel)]="searchCriteria.startDate" name="startDate">
      </div>
      <div class="form-group">
        <label for="endDate">End Date</label>
        <input type="date" id="endDate" class="form-control" [(ngModel)]="searchCriteria.endDate" name="endDate">
      </div>
      <button type="submit" class="btn btn-primary">Search</button>
      <button type="button" class="btn btn-secondary" (click)="resetFilters()">Reset Filters</button>
    </form>
  </div>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th (click)="sort('creator.username')" [class.sorted-asc]="sortColumn === 'creator.username' && sortDirection === 'asc'" [class.sorted-desc]="sortColumn === 'creator.username' && sortDirection === 'desc'">Creator Username</th>
        <th (click)="sort('title')" [class.sorted-asc]="sortColumn === 'title' && sortDirection === 'asc'" [class.sorted-desc]="sortColumn === 'title' && sortDirection === 'desc'">Title</th>
        <th (click)="sort('description')" [class.sorted-asc]="sortColumn === 'description' && sortDirection === 'asc'" [class.sorted-desc]="sortColumn === 'description' && sortDirection === 'desc'">Description</th>
        <th (click)="sort('targetAmount')" [class.sorted-asc]="sortColumn === 'targetAmount' && sortDirection === 'asc'" [class.sorted-desc]="sortColumn === 'targetAmount' && sortDirection === 'desc'">Target Amount</th>
        <th (click)="sort('currentAmount')" [class.sorted-asc]="sortColumn === 'currentAmount' && sortDirection === 'asc'" [class.sorted-desc]="sortColumn === 'currentAmount' && sortDirection === 'desc'">Current Amount</th>
        <th (click)="sort('startDate')" [class.sorted-asc]="sortColumn === 'startDate' && sortDirection === 'asc'" [class.sorted-desc]="sortColumn === 'startDate' && sortDirection === 'desc'">Start Date</th>
        <th (click)="sort('endDate')" [class.sorted-asc]="sortColumn === 'endDate' && sortDirection === 'asc'" [class.sorted-desc]="sortColumn === 'endDate' && sortDirection === 'desc'">End Date</th>
        <th (click)="sort('status')" [class.sorted-asc]="sortColumn === 'status' && sortDirection === 'asc'" [class.sorted-desc]="sortColumn === 'status' && sortDirection === 'desc'">Status</th>
        <th (click)="sort('fundingType')" [class.sorted-asc]="sortColumn === 'fundingType' && sortDirection === 'asc'" [class.sorted-desc]="sortColumn === 'fundingType' && sortDirection === 'desc'">Funding Type</th>
        <th>Details</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let campaign of filteredCampaigns">
        <td>{{ campaign.creator.username }}</td>
        <td>{{ campaign.title }}</td>
        <td>{{ campaign.description }}</td>
        <td>{{ campaign.targetAmount }}</td>
        <td>{{ campaign.currentAmount }}</td>
        <td>{{ campaign.startDate | date }}</td>
        <td>{{ campaign.endDate | date }}</td>
        <td>{{ campaign.status }}</td>
        <td>{{ campaign.fundingType }}</td>
        <td>
          <button class="btn btn-info" (click)="viewDetails(campaign.id)">Details</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


